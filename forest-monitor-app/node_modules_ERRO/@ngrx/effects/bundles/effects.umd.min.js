/**
 * @license NgRx 8.1.0
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("tslib"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/effects",["exports","tslib","@ngrx/store","rxjs","rxjs/operators","@angular/core"],r):r(((e=e||self).ngrx=e.ngrx||{},e.ngrx.effects={}),e.tslib,e["@ngrx/store"],e.rxjs,e.rxjs.operators,e.ng.core)}(this,function(e,r,t,n,o,c){"use strict";var i="__@ngrx/effects_create__";function f(e){return Object.getOwnPropertyNames(e).filter(function(r){return e[r]&&e[r].hasOwnProperty(i)}).map(function(t){return r.__assign({propertyName:t},e[t][i])})}function u(e){return Object.getPrototypeOf(e)}var a="__@ngrx/effects__";function s(e){return t.compose(p,u)(e)}function p(e){return e.constructor.hasOwnProperty(a)?e.constructor[a]:[]}function d(e){return[s,f].reduce(function(r,t){return r.concat(t(e))},[])}function _(e,t){var c=u(e).constructor.name,i=d(e).map(function(r){var n=r.propertyName,i=r.dispatch,f=r.resubscribeOnError,u="function"==typeof e[n]?e[n]():e[n],a=f?u.pipe(o.catchError(function(e){return t&&t.handleError(e),u})):u;return!1===i?a.pipe(o.ignoreElements()):a.pipe(o.materialize()).pipe(o.map(function(r){return{effect:e[n],notification:r,propertyName:n,sourceName:c,sourceInstance:e}}))});return n.merge.apply(void 0,r.__spread(i))}var l=function(e){function o(r){var t=e.call(this)||this;return r&&(t.source=r),t}var i;return r.__extends(o,e),i=o,o.prototype.lift=function(e){var r=new i;return r.source=this,r.operator=e,r},i=r.__decorate([c.Injectable(),r.__param(0,c.Inject(t.ScannedActionsSubject)),r.__metadata("design:paramtypes",[n.Observable])],o)}(n.Observable),y="ngrxOnIdentifyEffects",g=function(e){function n(r,t){var n=e.call(this)||this;return n.errorHandler=r,n.store=t,n}return r.__extends(n,e),n.prototype.addEffects=function(e){this.next(e),"ngrxOnInitEffects"in e&&"function"==typeof e.ngrxOnInitEffects&&this.store.dispatch(e.ngrxOnInitEffects())},n.prototype.toActions=function(){var e=this;return this.pipe(o.groupBy(u),o.mergeMap(function(e){return e.pipe(o.groupBy(m))}),o.mergeMap(function(r){return r.pipe(o.exhaustMap(function t(e){return function(r){var t=_(r,e);return function n(e){var r=u(e);return"ngrxOnRunEffects"in r&&"function"==typeof r.ngrxOnRunEffects}(r)?r.ngrxOnRunEffects(t):t}}(e.errorHandler)),o.map(function(r){return function t(e,r){if("N"===e.notification.kind){var t=e.notification.value;!function n(e){return"function"!=typeof e&&e&&e.type&&"string"==typeof e.type}(t)&&r.handleError(new Error("Effect "+function o(e){var r=e.propertyName;return'"'+e.sourceName+"."+r+("function"==typeof e.sourceInstance[r]?"()":"")+'"'}(e)+" dispatched an invalid action: "+function c(e){try{return JSON.stringify(e)}catch(r){return e}}(t)))}}(r,e.errorHandler),r.notification}),o.filter(function(e){return"N"===e.kind}),o.dematerialize())}))},r.__decorate([c.Injectable(),r.__metadata("design:paramtypes",[c.ErrorHandler,t.Store])],n)}(n.Subject);function m(e){return y in e&&"function"==typeof e[y]?e[y]():""}new c.InjectionToken("ngrx/effects: Immediate Effects");var h=new c.InjectionToken("ngrx/effects: Root Effects"),b=new c.InjectionToken("ngrx/effects: Feature Effects"),v=function(){function e(e,r){this.effectSources=e,this.store=r,this.effectsSubscription=null}return e.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},e.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},r.__decorate([c.Injectable(),r.__metadata("design:paramtypes",[g,t.Store])],e)}(),x="@ngrx/effects/init",E=function(){function e(e,r,t,n,o,c){this.sources=e,r.start(),n.forEach(function(r){return e.addEffects(r)}),t.dispatch({type:x})}return e.prototype.addEffects=function(e){this.sources.addEffects(e)},r.__decorate([c.NgModule({}),r.__param(3,c.Inject(h)),r.__param(4,c.Optional()),r.__param(5,c.Optional()),r.__metadata("design:paramtypes",[g,v,t.Store,Array,t.StoreRootModule,t.StoreFeatureModule])],e)}(),O=function(){return r.__decorate([c.NgModule({}),r.__param(1,c.Inject(b)),r.__param(2,c.Optional()),r.__param(3,c.Optional()),r.__metadata("design:paramtypes",[E,Array,t.StoreRootModule,t.StoreFeatureModule])],function e(r,t,n,o){t.forEach(function(e){return e.forEach(function(e){return r.addEffects(e)})})})}(),j=function(){function e(){}return e.forFeature=function(e){return{ngModule:O,providers:[e,{provide:b,multi:!0,deps:e,useFactory:S}]}},e.forRoot=function(e){return{ngModule:E,providers:[v,g,l,e,{provide:h,deps:e,useFactory:S}]}},r.__decorate([c.NgModule({})],e)}();function S(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e}e.ɵngrx_modules_effects_effects_c=O,e.ɵngrx_modules_effects_effects_a=S,e.ɵngrx_modules_effects_effects_b=E,e.ɵngrx_modules_effects_effects_f=v,e.ɵngrx_modules_effects_effects_e=b,e.ɵngrx_modules_effects_effects_d=h,e.createEffect=function N(e,t){var n=e(),o=r.__assign({dispatch:!0,resubscribeOnError:!0},t);return Object.defineProperty(n,i,{value:o}),n},e.Effect=function I(e){var r=void 0===e?{}:e,t=r.dispatch,n=void 0===t||t,o=r.resubscribeOnError,c=void 0===o||o;return function(e,r){!function t(e,r){var t=e.constructor,n=t.hasOwnProperty(a)?t[a]:Object.defineProperty(t,a,{value:[]})[a];Array.prototype.push.apply(n,r)}(e,[{propertyName:r,dispatch:n,resubscribeOnError:c}])}},e.getEffectsMetadata=function M(e){var t,n,o={};try{for(var c=r.__values(d(e)),i=c.next();!i.done;i=c.next()){var f=i.value;o[f.propertyName]={dispatch:f.dispatch,resubscribeOnError:f.resubscribeOnError}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o},e.mergeEffects=_,e.Actions=l,e.ofType=function w(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return o.filter(function(r){return e.some(function(e){return"string"==typeof e?e===r.type:e.type===r.type})})},e.EffectsModule=j,e.EffectSources=g,e.ROOT_EFFECTS_INIT=x,e.act=function F(e,t){var c="function"==typeof e?{project:e,error:t,operator:o.concatMap,complete:void 0,unsubscribe:void 0}:r.__assign({},e,{operator:e.operator||o.concatMap}),i=c.project,f=c.error,u=c.complete,a=c.operator,s=c.unsubscribe;return function(e){return n.defer(function(){var r=new n.Subject;return n.merge(e.pipe(a(function(e,t){return n.defer(function(){var c=!1,a=!1,p=0;return i(e,t).pipe(o.materialize(),o.map(function(r){switch(r.kind){case"E":return a=!0,new n.Notification("N",f(r.error,e));case"C":return c=!0,u?new n.Notification("N",u(p,e)):void 0;default:return++p,r}}),o.filter(function(e){return null!=e}),o.dematerialize(),o.finalize(function(){c||a||!s||r.next(s(p,e))}))})})),r)})}},Object.defineProperty(e,"__esModule",{value:!0})});